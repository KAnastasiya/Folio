/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__blocks_navigation_navigation__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__blocks_navigation_navigation___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__blocks_navigation_navigation__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__blocks_portfolio_filter_portfolio__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__blocks_portfolio_filter_portfolio___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__blocks_portfolio_filter_portfolio__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__blocks_slider_slider__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__blocks_slider_slider___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__blocks_slider_slider__);




/***/ }),
/* 2 */
/***/ (function(module, exports) {

/**
 * Class name of DOM-element
 * @type {Object}
 */
var navigation = {
  itemList: 'page-nav__list',
  item: 'page-nav__item',
  currentItem: 'is-active'
};

/**
 * Name of the elements attribute, that contains elements
 * @type {String}
 */
var elementStateAttribute = 'data-state';

/**
 * Clicking on the filter handler
 * @param {Object} event
 */
var onNavigationClick = function onNavigationClick(event) {
  var clickedItem = event.target;
  var clickedItemParent = event.target.parentElement;

  if (clickedItemParent.classList.contains(navigation.item)) {
    window.location.assign(clickedItem.getAttribute('href'));

    var itemList = document.querySelectorAll('.' + navigation.item);
    for (var i = 0; i < itemList.length; i++) {
      itemList[i].children[0].removeAttribute(elementStateAttribute);
    }
    clickedItemParent.children[0].setAttribute(elementStateAttribute, navigation.currentItem);
  }
};

/**
 * Initialization
 */
(function _init() {
  var itemList = document.querySelectorAll('.' + navigation.item);

  for (var i = 0; i < itemList.length; i++) {
    if (window.location.pathname.slice(1) === itemList[i].children[0].getAttribute('href')) {
      itemList[i].children[0].setAttribute(elementStateAttribute, navigation.currentItem);
    } else if (window.location.pathname === '/') {
      itemList[0].children[0].setAttribute(elementStateAttribute, navigation.currentItem);
    }
  }

  document.querySelector('.' + navigation.itemList).addEventListener('click', onNavigationClick);
})();

/***/ }),
/* 3 */
/***/ (function(module, exports) {

/**
 * Class name of DOM-element
 * @type {Object}
 */
var portfolio = {
  portfolio: 'portfolio',
  img: 'portfolio__item-img',
  filtersList: 'portfolio-filters__list',
  filter: 'portfolio-filters__item',
  pagination: 'portfolio-pagination',
  paginationItemList: 'portfolio-pagination__list',
  paginationItem: 'portfolio-pagination__item',
  paginationLink: 'portfolio-pagination__link',
  currentItem: 'is-active',
  showImage: 'visible'
};

/**
 * Supported types of filtering
 * @type {Object}
 */
var portfolioFilter = {
  all: 'All',
  wedding: 'Wedding',
  landscape: 'Landscape',
  portrait: 'Portrait',
  events: 'Events'
};

/**
 * DOM-elements for all portfolio images
 * @type {HTMLCollection}
 */
var portfolioImageList = document.querySelectorAll('.' + portfolio.img);

/**
 * Name of the elements attribute, that contains elements
 * @type {String}
 */
var elementStateAttribute = 'data-state';

/**
 * Name of the elements attribute, that contains filters name
 * @type {String}
 */
var elementFiltersNameAttribute = 'data-name';

/**
 * Default filter
 * @type {String}
 */
var DEFAULT_FILTER = portfolioFilter.portrait;

/**
 * Number of images on one page
 * @type {Number}
 * @constant
 */
var PAGE_SIZE = 9;

/**
 * Default chosen page
 * @type {Number}
 * @constant
 */
var DEFAULT_PAGE_NUM = 0;

/**
 * Name of record with last chosen filter in Local Storage
 * @type {String}
 */
var filterInStorage = 'filter';

/**
 * Total number of portfolio images
 * @type {Number}
 */
var portfolioImageCount = portfolioImageList.length;

/**
 * Number of portfolio pages
 * @type {Number}
 */
var portfolioPage = portfolioImageCount / PAGE_SIZE;

/**
 * Render portfolio page
 * @param {Number}  pageNum  Page number
 */
var renderPortfolioPage = function renderPortfolioPage(pageNum) {
  var from = pageNum * PAGE_SIZE;
  var to = from + PAGE_SIZE;

  for (var i = 0; i < portfolioImageCount; i++) {
    portfolioImageList[i].parentElement.classList.remove(portfolio.showImage);
  }

  for (var _i = from; _i < to && _i < portfolioImageCount; _i++) {
    portfolioImageList[_i].parentElement.classList.add(portfolio.showImage);
  }
};

/**
 * Set portfolio pagination
 */
var setPortfolioPagination = function setPortfolioPagination() {
  var portfolioPagination = document.createElement('div');
  portfolioPagination.className = portfolio.pagination;
  document.querySelector('.' + portfolio.portfolio).appendChild(portfolioPagination);

  var portfolioPaginationList = document.createElement('ul');
  portfolioPaginationList.className = portfolio.paginationItemList;
  portfolioPagination.appendChild(portfolioPaginationList);

  for (var i = 0; i < portfolioPage; i++) {
    var portfolioPaginationItem = document.createElement('li');
    portfolioPaginationItem.className = portfolio.paginationItem;
    portfolioPaginationList.appendChild(portfolioPaginationItem);

    var portfolioPaginationNum = document.createElement('a');
    portfolioPaginationNum.className = portfolio.paginationLink;
    portfolioPaginationNum.innerHTML = i + 1;
    portfolioPaginationItem.appendChild(portfolioPaginationNum);
  }

  // Set first page as default page
  var portfolioPagesList = document.querySelectorAll('.' + portfolio.paginationItem);
  portfolioPagesList[0].children[0].setAttribute(elementStateAttribute, portfolio.currentItem);
};

/**
 * Save last chosen filter in Local Storage
 * @param {Element}  slide  DOM-element, that contains filter
*/
var setFilterInStorage = function setFilterInStorage() {
  localStorage.setItem(filterInStorage, DEFAULT_FILTER);
};

/**
  * Get last chosen filter from Local Storage
  */
var getFilterFromStorage = function getFilterFromStorage() {
  return localStorage.getItem(filterInStorage);
};

/**
 * Clicking on the pagination handler
 * @param {Object} event
 */
var onPortfolioPaginationClick = function onPortfolioPaginationClick(event) {
  var clickedPortfolioPage = event.target;
  var clickedPortfolioPageParent = clickedPortfolioPage.parentElement;

  if (clickedPortfolioPageParent.classList.contains(portfolio.paginationItem)) {
    var portfolioPagesList = document.querySelectorAll('.' + portfolio.paginationItem);
    for (var i = 0; i < portfolioPagesList.length; i++) {
      portfolioPagesList[i].children[0].removeAttribute(elementStateAttribute);
    }
    clickedPortfolioPage.setAttribute(elementStateAttribute, portfolio.currentItem);
    renderPortfolioPage(clickedPortfolioPage.innerHTML - 1);
  }
};

/**
 * Clicking on the filter handler
 * @param {Object} event
 */
var onPortfolioFilterClick = function onPortfolioFilterClick(event) {
  var clickedFilterParent = event.target.parentElement;
  var portfolioFiltersList = document.querySelectorAll('.' + portfolio.filter);

  if (clickedFilterParent.classList.contains(portfolio.filter)) {
    for (var i = 0; i < portfolioFiltersList.length; i++) {
      portfolioFiltersList[i].children[0].removeAttribute(elementStateAttribute);
    }
    clickedFilterParent.children[0].setAttribute(elementStateAttribute, portfolio.currentItem);
    localStorage[filterInStorage] = clickedFilterParent.getAttribute(elementFiltersNameAttribute);
  }
};

/**
 * Initialization
 */
(function init() {
  var portfolioFiltersList = document.querySelectorAll('.' + portfolio.filter);

  if (portfolioFiltersList.length) {
    renderPortfolioPage(DEFAULT_PAGE_NUM);
    setPortfolioPagination();

    var defaultCurrentFilterName = void 0;
    var defaultCurrentFilter = void 0;

    if ({}.propertyIsEnumerable.call(localStorage, filterInStorage)) {
      defaultCurrentFilterName = getFilterFromStorage();
    } else {
      defaultCurrentFilterName = DEFAULT_FILTER;
      setFilterInStorage();
    }

    for (var i = 0; i < portfolioFiltersList.length; i++) {
      if (portfolioFiltersList[i].getAttribute(elementFiltersNameAttribute).toUpperCase() === defaultCurrentFilterName.toUpperCase()) {
        defaultCurrentFilter = portfolioFiltersList[i];
      }
    }

    defaultCurrentFilter.children[0].setAttribute(elementStateAttribute, portfolio.currentItem);

    document.querySelector('.' + portfolio.paginationItemList).addEventListener('click', onPortfolioPaginationClick);
    document.querySelector('.' + portfolio.filtersList).addEventListener('click', onPortfolioFilterClick);
  }
})();

/***/ }),
/* 4 */
/***/ (function(module, exports) {

/**
 * Class name of DOM-element
 * @type  {Object}
 */
var slider = {
  container: 'slider',
  itemList: 'slider__list',
  item: 'slider__item',
  itemCounter: 'slider__counter',
  itemCounterValue: 'slider__counter-value',
  currentItem: 'is-active'
};

/**
 * DOM-elements, that contains slide
 * @type  {HTMLCollection}
 */
var slideList = document.querySelectorAll('.' + slider.item);

/**
 * Name of the elements attribute, that contains elements
 * @type  {String}
 */
var elementStateAttribute = 'data-state';

/**
 * Name of the elements attribute, that contains number of slide
 * @type  {String}
 */
var elementSlideNumAttribute = 'data-num';

/**
 * Default chosen slide
 * @type  {Number}
 * @constant
 */
var DEFAULT_SLIDE = 0;

/**
 * Name of record with last chosen slide in Local Storage
 * @type  {String}
 */
var slideInStorage = 'slide';

/**
 * Render page background
 */
var setPageBackground = function setPageBackground(element) {
  document.querySelector('body').style.backgroundImage = 'url(' + element.getAttribute('data-img') + ')';
};

/**
* Set slider counter value
* @param  {Element}  slide  DOM-element, that contains slide
* @param  {Element}  counterContainer  DOM-element, that contains slider counter value
*/
var setSlideCounter = function setSlideCounter(slide, counterContainer) {
  var container = counterContainer;
  container.innerHTML = slide.getAttribute(elementSlideNumAttribute) + ' / ' + slideList.length;
};

/**
 * Render slider counter
 * @param  {Element}  currentSLide  Current chosen slide
 */
var renderSlideCounter = function renderSlideCounter(currentSLide) {
  // Create DOM-element for slide counter container
  var slideCounter = document.createElement('p');
  slideCounter.className = slider.itemCounter;
  slideCounter.innerHTML = '||';

  // Create DOM-element for slide counter
  var slideCounterContent = document.createElement('span');
  slideCounterContent.className = slider.itemCounterValue;

  // Insert slide counter and its container in DOM
  var sliderContainer = document.querySelector('.' + slider.container);
  sliderContainer.insertBefore(slideCounter, sliderContainer.children[0]);
  sliderContainer.children[0].appendChild(slideCounterContent);

  setSlideCounter(currentSLide, slideCounterContent);
};

/**
 * Change current slide
 * @param  {Element}  slideParent  DOM-element, that is current slide parent
 */
var changeCurrentSlide = function changeCurrentSlide(slideParent) {
  var slidesList = document.querySelectorAll('.' + slider.item);
  for (var i = 0; i < slidesList.length; i++) {
    slidesList[i].children[0].removeAttribute(elementStateAttribute);
  }
  slideParent.children[0].setAttribute(elementStateAttribute, slider.currentItem);
  localStorage[slideInStorage] = slideParent.getAttribute(elementSlideNumAttribute) - 1;
  setPageBackground(event.target.parentElement);
  setSlideCounter(slideParent, document.querySelector('.' + slider.itemCounterValue));
};

/**
 * Save last chosen slide in Local Storage
 * @param  {Element}  slide  DOM-element, that contains slide
*/
var setSlideInStorage = function setSlideInStorage() {
  return localStorage.setItem(slideInStorage, DEFAULT_SLIDE);
};

/**
  * Get last chosen slide from Local Storage
  */
var getSlideFromStorage = function getSlideFromStorage() {
  return localStorage.getItem(slideInStorage);
};

/**
 * Clicking on the slide handler
 * @param  {Object}  event
 */
var onSlideClick = function onSlideClick(event) {
  var clickedSlideParent = event.target.parentElement;
  if (clickedSlideParent.classList.contains(slider.item)) {
    changeCurrentSlide(clickedSlideParent);
  }
};

/**
 * Initialization
 */
(function _initFunc() {
  var slideContainer = document.querySelector('.' + slider.itemList);
  var defaultCurrentSlide = void 0;

  // Set default chosen slide
  if ({}.propertyIsEnumerable.call(localStorage, slideInStorage)) {
    var defaultCurrentSlideNum = getSlideFromStorage();
    for (var i = 0; i < slideList.length; i++) {
      if (slideList[i].getAttribute(elementSlideNumAttribute) - 1 === +defaultCurrentSlideNum) {
        defaultCurrentSlide = slideList[i];
      }
    }
  } else {
    defaultCurrentSlide = slideContainer.children[DEFAULT_SLIDE];
    setSlideInStorage(DEFAULT_SLIDE);
  }

  defaultCurrentSlide.children[0].setAttribute(elementStateAttribute, slider.currentItem);

  // Set slider counter and default background
  setPageBackground(defaultCurrentSlide);
  renderSlideCounter(defaultCurrentSlide);

  // Attaching event handlers
  slideContainer.addEventListener('click', onSlideClick);
})();

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDMzNGVhNTA3OGZkMjM3MDNjYWZiIiwid2VicGFjazovLy9zcmMvc2NyaXB0LmpzIiwid2VicGFjazovLy9zcmMvYmxvY2tzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5qcyIsIndlYnBhY2s6Ly8vc3JjL2Jsb2Nrcy9wb3J0Zm9saW8tZmlsdGVyL3BvcnRmb2xpby5qcyIsIndlYnBhY2s6Ly8vc3JjL2Jsb2Nrcy9zbGlkZXIvc2xpZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDMzNGVhNTA3OGZkMjM3MDNjYWZiIiwiaW1wb3J0ICcuL2Jsb2Nrcy9uYXZpZ2F0aW9uL25hdmlnYXRpb24nO1xuaW1wb3J0ICcuL2Jsb2Nrcy9wb3J0Zm9saW8tZmlsdGVyL3BvcnRmb2xpbyc7XG5pbXBvcnQgJy4vYmxvY2tzL3NsaWRlci9zbGlkZXInO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9zY3JpcHQuanMiLCIvKipcbiAqIENsYXNzIG5hbWUgb2YgRE9NLWVsZW1lbnRcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmNvbnN0IG5hdmlnYXRpb24gPSB7XG4gIGl0ZW1MaXN0OiAncGFnZS1uYXZfX2xpc3QnLFxuICBpdGVtOiAncGFnZS1uYXZfX2l0ZW0nLFxuICBjdXJyZW50SXRlbTogJ2lzLWFjdGl2ZScsXG59O1xuXG4vKipcbiAqIE5hbWUgb2YgdGhlIGVsZW1lbnRzIGF0dHJpYnV0ZSwgdGhhdCBjb250YWlucyBlbGVtZW50c1xuICogQHR5cGUge1N0cmluZ31cbiAqL1xuY29uc3QgZWxlbWVudFN0YXRlQXR0cmlidXRlID0gJ2RhdGEtc3RhdGUnO1xuXG4vKipcbiAqIENsaWNraW5nIG9uIHRoZSBmaWx0ZXIgaGFuZGxlclxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gKi9cbmNvbnN0IG9uTmF2aWdhdGlvbkNsaWNrID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IGNsaWNrZWRJdGVtID0gZXZlbnQudGFyZ2V0O1xuICBjb25zdCBjbGlja2VkSXRlbVBhcmVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuXG4gIGlmIChjbGlja2VkSXRlbVBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMobmF2aWdhdGlvbi5pdGVtKSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oY2xpY2tlZEl0ZW0uZ2V0QXR0cmlidXRlKCdocmVmJykpO1xuXG4gICAgY29uc3QgaXRlbUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtuYXZpZ2F0aW9uLml0ZW19YCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaXRlbUxpc3RbaV0uY2hpbGRyZW5bMF0ucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnRTdGF0ZUF0dHJpYnV0ZSk7XG4gICAgfVxuICAgIGNsaWNrZWRJdGVtUGFyZW50LmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZShlbGVtZW50U3RhdGVBdHRyaWJ1dGUsIG5hdmlnYXRpb24uY3VycmVudEl0ZW0pO1xuICB9XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemF0aW9uXG4gKi9cbihmdW5jdGlvbiBfaW5pdCgpIHtcbiAgY29uc3QgaXRlbUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtuYXZpZ2F0aW9uLml0ZW19YCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc2xpY2UoMSkgPT09IGl0ZW1MaXN0W2ldLmNoaWxkcmVuWzBdLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB7XG4gICAgICBpdGVtTGlzdFtpXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoZWxlbWVudFN0YXRlQXR0cmlidXRlLCBuYXZpZ2F0aW9uLmN1cnJlbnRJdGVtKTtcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy8nKSB7XG4gICAgICBpdGVtTGlzdFswXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoZWxlbWVudFN0YXRlQXR0cmlidXRlLCBuYXZpZ2F0aW9uLmN1cnJlbnRJdGVtKTtcbiAgICB9XG4gIH1cblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtuYXZpZ2F0aW9uLml0ZW1MaXN0fWApLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25OYXZpZ2F0aW9uQ2xpY2spO1xufSgpKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvYmxvY2tzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5qcyIsIi8qKlxuICogQ2xhc3MgbmFtZSBvZiBET00tZWxlbWVudFxuICogQHR5cGUge09iamVjdH1cbiAqL1xuY29uc3QgcG9ydGZvbGlvID0ge1xuICBwb3J0Zm9saW86ICdwb3J0Zm9saW8nLFxuICBpbWc6ICdwb3J0Zm9saW9fX2l0ZW0taW1nJyxcbiAgZmlsdGVyc0xpc3Q6ICdwb3J0Zm9saW8tZmlsdGVyc19fbGlzdCcsXG4gIGZpbHRlcjogJ3BvcnRmb2xpby1maWx0ZXJzX19pdGVtJyxcbiAgcGFnaW5hdGlvbjogJ3BvcnRmb2xpby1wYWdpbmF0aW9uJyxcbiAgcGFnaW5hdGlvbkl0ZW1MaXN0OiAncG9ydGZvbGlvLXBhZ2luYXRpb25fX2xpc3QnLFxuICBwYWdpbmF0aW9uSXRlbTogJ3BvcnRmb2xpby1wYWdpbmF0aW9uX19pdGVtJyxcbiAgcGFnaW5hdGlvbkxpbms6ICdwb3J0Zm9saW8tcGFnaW5hdGlvbl9fbGluaycsXG4gIGN1cnJlbnRJdGVtOiAnaXMtYWN0aXZlJyxcbiAgc2hvd0ltYWdlOiAndmlzaWJsZScsXG59O1xuXG4vKipcbiAqIFN1cHBvcnRlZCB0eXBlcyBvZiBmaWx0ZXJpbmdcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmNvbnN0IHBvcnRmb2xpb0ZpbHRlciA9IHtcbiAgYWxsOiAnQWxsJyxcbiAgd2VkZGluZzogJ1dlZGRpbmcnLFxuICBsYW5kc2NhcGU6ICdMYW5kc2NhcGUnLFxuICBwb3J0cmFpdDogJ1BvcnRyYWl0JyxcbiAgZXZlbnRzOiAnRXZlbnRzJyxcbn07XG5cbi8qKlxuICogRE9NLWVsZW1lbnRzIGZvciBhbGwgcG9ydGZvbGlvIGltYWdlc1xuICogQHR5cGUge0hUTUxDb2xsZWN0aW9ufVxuICovXG5jb25zdCBwb3J0Zm9saW9JbWFnZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtwb3J0Zm9saW8uaW1nfWApO1xuXG4vKipcbiAqIE5hbWUgb2YgdGhlIGVsZW1lbnRzIGF0dHJpYnV0ZSwgdGhhdCBjb250YWlucyBlbGVtZW50c1xuICogQHR5cGUge1N0cmluZ31cbiAqL1xuY29uc3QgZWxlbWVudFN0YXRlQXR0cmlidXRlID0gJ2RhdGEtc3RhdGUnO1xuXG4vKipcbiAqIE5hbWUgb2YgdGhlIGVsZW1lbnRzIGF0dHJpYnV0ZSwgdGhhdCBjb250YWlucyBmaWx0ZXJzIG5hbWVcbiAqIEB0eXBlIHtTdHJpbmd9XG4gKi9cbmNvbnN0IGVsZW1lbnRGaWx0ZXJzTmFtZUF0dHJpYnV0ZSA9ICdkYXRhLW5hbWUnO1xuXG4vKipcbiAqIERlZmF1bHQgZmlsdGVyXG4gKiBAdHlwZSB7U3RyaW5nfVxuICovXG5jb25zdCBERUZBVUxUX0ZJTFRFUiA9IHBvcnRmb2xpb0ZpbHRlci5wb3J0cmFpdDtcblxuLyoqXG4gKiBOdW1iZXIgb2YgaW1hZ2VzIG9uIG9uZSBwYWdlXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IFBBR0VfU0laRSA9IDk7XG5cbi8qKlxuICogRGVmYXVsdCBjaG9zZW4gcGFnZVxuICogQHR5cGUge051bWJlcn1cbiAqIEBjb25zdGFudFxuICovXG5jb25zdCBERUZBVUxUX1BBR0VfTlVNID0gMDtcblxuLyoqXG4gKiBOYW1lIG9mIHJlY29yZCB3aXRoIGxhc3QgY2hvc2VuIGZpbHRlciBpbiBMb2NhbCBTdG9yYWdlXG4gKiBAdHlwZSB7U3RyaW5nfVxuICovXG5jb25zdCBmaWx0ZXJJblN0b3JhZ2UgPSAnZmlsdGVyJztcblxuLyoqXG4gKiBUb3RhbCBudW1iZXIgb2YgcG9ydGZvbGlvIGltYWdlc1xuICogQHR5cGUge051bWJlcn1cbiAqL1xuY29uc3QgcG9ydGZvbGlvSW1hZ2VDb3VudCA9IHBvcnRmb2xpb0ltYWdlTGlzdC5sZW5ndGg7XG5cbi8qKlxuICogTnVtYmVyIG9mIHBvcnRmb2xpbyBwYWdlc1xuICogQHR5cGUge051bWJlcn1cbiAqL1xuY29uc3QgcG9ydGZvbGlvUGFnZSA9IHBvcnRmb2xpb0ltYWdlQ291bnQgLyBQQUdFX1NJWkU7XG5cbi8qKlxuICogUmVuZGVyIHBvcnRmb2xpbyBwYWdlXG4gKiBAcGFyYW0ge051bWJlcn0gIHBhZ2VOdW0gIFBhZ2UgbnVtYmVyXG4gKi9cbmNvbnN0IHJlbmRlclBvcnRmb2xpb1BhZ2UgPSAocGFnZU51bSkgPT4ge1xuICBjb25zdCBmcm9tID0gcGFnZU51bSAqIFBBR0VfU0laRTtcbiAgY29uc3QgdG8gPSBmcm9tICsgUEFHRV9TSVpFO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGZvbGlvSW1hZ2VDb3VudDsgaSsrKSB7XG4gICAgcG9ydGZvbGlvSW1hZ2VMaXN0W2ldLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShwb3J0Zm9saW8uc2hvd0ltYWdlKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG8gJiYgaSA8IHBvcnRmb2xpb0ltYWdlQ291bnQ7IGkrKykge1xuICAgIHBvcnRmb2xpb0ltYWdlTGlzdFtpXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQocG9ydGZvbGlvLnNob3dJbWFnZSk7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IHBvcnRmb2xpbyBwYWdpbmF0aW9uXG4gKi9cbmNvbnN0IHNldFBvcnRmb2xpb1BhZ2luYXRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHBvcnRmb2xpb1BhZ2luYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcG9ydGZvbGlvUGFnaW5hdGlvbi5jbGFzc05hbWUgPSBwb3J0Zm9saW8ucGFnaW5hdGlvbjtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9ydGZvbGlvLnBvcnRmb2xpb31gKS5hcHBlbmRDaGlsZChwb3J0Zm9saW9QYWdpbmF0aW9uKTtcblxuICBjb25zdCBwb3J0Zm9saW9QYWdpbmF0aW9uTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gIHBvcnRmb2xpb1BhZ2luYXRpb25MaXN0LmNsYXNzTmFtZSA9IHBvcnRmb2xpby5wYWdpbmF0aW9uSXRlbUxpc3Q7XG4gIHBvcnRmb2xpb1BhZ2luYXRpb24uYXBwZW5kQ2hpbGQocG9ydGZvbGlvUGFnaW5hdGlvbkxpc3QpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGZvbGlvUGFnZTsgaSsrKSB7XG4gICAgY29uc3QgcG9ydGZvbGlvUGFnaW5hdGlvbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIHBvcnRmb2xpb1BhZ2luYXRpb25JdGVtLmNsYXNzTmFtZSA9IHBvcnRmb2xpby5wYWdpbmF0aW9uSXRlbTtcbiAgICBwb3J0Zm9saW9QYWdpbmF0aW9uTGlzdC5hcHBlbmRDaGlsZChwb3J0Zm9saW9QYWdpbmF0aW9uSXRlbSk7XG5cbiAgICBjb25zdCBwb3J0Zm9saW9QYWdpbmF0aW9uTnVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHBvcnRmb2xpb1BhZ2luYXRpb25OdW0uY2xhc3NOYW1lID0gcG9ydGZvbGlvLnBhZ2luYXRpb25MaW5rO1xuICAgIHBvcnRmb2xpb1BhZ2luYXRpb25OdW0uaW5uZXJIVE1MID0gaSArIDE7XG4gICAgcG9ydGZvbGlvUGFnaW5hdGlvbkl0ZW0uYXBwZW5kQ2hpbGQocG9ydGZvbGlvUGFnaW5hdGlvbk51bSk7XG4gIH1cblxuICAvLyBTZXQgZmlyc3QgcGFnZSBhcyBkZWZhdWx0IHBhZ2VcbiAgY29uc3QgcG9ydGZvbGlvUGFnZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7cG9ydGZvbGlvLnBhZ2luYXRpb25JdGVtfWApO1xuICBwb3J0Zm9saW9QYWdlc0xpc3RbMF0uY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKGVsZW1lbnRTdGF0ZUF0dHJpYnV0ZSwgcG9ydGZvbGlvLmN1cnJlbnRJdGVtKTtcbn07XG5cbi8qKlxuICogU2F2ZSBsYXN0IGNob3NlbiBmaWx0ZXIgaW4gTG9jYWwgU3RvcmFnZVxuICogQHBhcmFtIHtFbGVtZW50fSAgc2xpZGUgIERPTS1lbGVtZW50LCB0aGF0IGNvbnRhaW5zIGZpbHRlclxuKi9cbmNvbnN0IHNldEZpbHRlckluU3RvcmFnZSA9ICgpID0+IHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZmlsdGVySW5TdG9yYWdlLCBERUZBVUxUX0ZJTFRFUik7XG59O1xuXG4vKipcbiAgKiBHZXQgbGFzdCBjaG9zZW4gZmlsdGVyIGZyb20gTG9jYWwgU3RvcmFnZVxuICAqL1xuY29uc3QgZ2V0RmlsdGVyRnJvbVN0b3JhZ2UgPSAoKSA9PiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShmaWx0ZXJJblN0b3JhZ2UpO1xuXG4vKipcbiAqIENsaWNraW5nIG9uIHRoZSBwYWdpbmF0aW9uIGhhbmRsZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICovXG5jb25zdCBvblBvcnRmb2xpb1BhZ2luYXRpb25DbGljayA9IChldmVudCkgPT4ge1xuICBjb25zdCBjbGlja2VkUG9ydGZvbGlvUGFnZSA9IGV2ZW50LnRhcmdldDtcbiAgY29uc3QgY2xpY2tlZFBvcnRmb2xpb1BhZ2VQYXJlbnQgPSBjbGlja2VkUG9ydGZvbGlvUGFnZS5wYXJlbnRFbGVtZW50O1xuXG4gIGlmIChjbGlja2VkUG9ydGZvbGlvUGFnZVBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMocG9ydGZvbGlvLnBhZ2luYXRpb25JdGVtKSkge1xuICAgIGNvbnN0IHBvcnRmb2xpb1BhZ2VzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke3BvcnRmb2xpby5wYWdpbmF0aW9uSXRlbX1gKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcnRmb2xpb1BhZ2VzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgcG9ydGZvbGlvUGFnZXNMaXN0W2ldLmNoaWxkcmVuWzBdLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50U3RhdGVBdHRyaWJ1dGUpO1xuICAgIH1cbiAgICBjbGlja2VkUG9ydGZvbGlvUGFnZS5zZXRBdHRyaWJ1dGUoZWxlbWVudFN0YXRlQXR0cmlidXRlLCBwb3J0Zm9saW8uY3VycmVudEl0ZW0pO1xuICAgIHJlbmRlclBvcnRmb2xpb1BhZ2UoY2xpY2tlZFBvcnRmb2xpb1BhZ2UuaW5uZXJIVE1MIC0gMSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2xpY2tpbmcgb24gdGhlIGZpbHRlciBoYW5kbGVyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAqL1xuY29uc3Qgb25Qb3J0Zm9saW9GaWx0ZXJDbGljayA9IChldmVudCkgPT4ge1xuICBjb25zdCBjbGlja2VkRmlsdGVyUGFyZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gIGNvbnN0IHBvcnRmb2xpb0ZpbHRlcnNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7cG9ydGZvbGlvLmZpbHRlcn1gKTtcblxuICBpZiAoY2xpY2tlZEZpbHRlclBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMocG9ydGZvbGlvLmZpbHRlcikpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcnRmb2xpb0ZpbHRlcnNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb3J0Zm9saW9GaWx0ZXJzTGlzdFtpXS5jaGlsZHJlblswXS5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudFN0YXRlQXR0cmlidXRlKTtcbiAgICB9XG4gICAgY2xpY2tlZEZpbHRlclBhcmVudC5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoZWxlbWVudFN0YXRlQXR0cmlidXRlLCBwb3J0Zm9saW8uY3VycmVudEl0ZW0pO1xuICAgIGxvY2FsU3RvcmFnZVtmaWx0ZXJJblN0b3JhZ2VdID0gY2xpY2tlZEZpbHRlclBhcmVudC5nZXRBdHRyaWJ1dGUoZWxlbWVudEZpbHRlcnNOYW1lQXR0cmlidXRlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbml0aWFsaXphdGlvblxuICovXG4oZnVuY3Rpb24gaW5pdCgpIHtcbiAgY29uc3QgcG9ydGZvbGlvRmlsdGVyc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtwb3J0Zm9saW8uZmlsdGVyfWApO1xuXG4gIGlmIChwb3J0Zm9saW9GaWx0ZXJzTGlzdC5sZW5ndGgpIHtcbiAgICByZW5kZXJQb3J0Zm9saW9QYWdlKERFRkFVTFRfUEFHRV9OVU0pO1xuICAgIHNldFBvcnRmb2xpb1BhZ2luYXRpb24oKTtcblxuICAgIGxldCBkZWZhdWx0Q3VycmVudEZpbHRlck5hbWU7XG4gICAgbGV0IGRlZmF1bHRDdXJyZW50RmlsdGVyO1xuXG4gICAgaWYgKHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwobG9jYWxTdG9yYWdlLCBmaWx0ZXJJblN0b3JhZ2UpKSB7XG4gICAgICBkZWZhdWx0Q3VycmVudEZpbHRlck5hbWUgPSBnZXRGaWx0ZXJGcm9tU3RvcmFnZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZhdWx0Q3VycmVudEZpbHRlck5hbWUgPSBERUZBVUxUX0ZJTFRFUjtcbiAgICAgIHNldEZpbHRlckluU3RvcmFnZSgpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGZvbGlvRmlsdGVyc0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwb3J0Zm9saW9GaWx0ZXJzTGlzdFtpXS5nZXRBdHRyaWJ1dGUoZWxlbWVudEZpbHRlcnNOYW1lQXR0cmlidXRlKS50b1VwcGVyQ2FzZSgpID09PSBkZWZhdWx0Q3VycmVudEZpbHRlck5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICBkZWZhdWx0Q3VycmVudEZpbHRlciA9IHBvcnRmb2xpb0ZpbHRlcnNMaXN0W2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRlZmF1bHRDdXJyZW50RmlsdGVyLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZShlbGVtZW50U3RhdGVBdHRyaWJ1dGUsIHBvcnRmb2xpby5jdXJyZW50SXRlbSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwb3J0Zm9saW8ucGFnaW5hdGlvbkl0ZW1MaXN0fWApLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Qb3J0Zm9saW9QYWdpbmF0aW9uQ2xpY2spO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BvcnRmb2xpby5maWx0ZXJzTGlzdH1gKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uUG9ydGZvbGlvRmlsdGVyQ2xpY2spO1xuICB9XG59KCkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ibG9ja3MvcG9ydGZvbGlvLWZpbHRlci9wb3J0Zm9saW8uanMiLCIvKipcbiAqIENsYXNzIG5hbWUgb2YgRE9NLWVsZW1lbnRcbiAqIEB0eXBlICB7T2JqZWN0fVxuICovXG5jb25zdCBzbGlkZXIgPSB7XG4gIGNvbnRhaW5lcjogJ3NsaWRlcicsXG4gIGl0ZW1MaXN0OiAnc2xpZGVyX19saXN0JyxcbiAgaXRlbTogJ3NsaWRlcl9faXRlbScsXG4gIGl0ZW1Db3VudGVyOiAnc2xpZGVyX19jb3VudGVyJyxcbiAgaXRlbUNvdW50ZXJWYWx1ZTogJ3NsaWRlcl9fY291bnRlci12YWx1ZScsXG4gIGN1cnJlbnRJdGVtOiAnaXMtYWN0aXZlJyxcbn07XG5cbi8qKlxuICogRE9NLWVsZW1lbnRzLCB0aGF0IGNvbnRhaW5zIHNsaWRlXG4gKiBAdHlwZSAge0hUTUxDb2xsZWN0aW9ufVxuICovXG5jb25zdCBzbGlkZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtzbGlkZXIuaXRlbX1gKTtcblxuLyoqXG4gKiBOYW1lIG9mIHRoZSBlbGVtZW50cyBhdHRyaWJ1dGUsIHRoYXQgY29udGFpbnMgZWxlbWVudHNcbiAqIEB0eXBlICB7U3RyaW5nfVxuICovXG5jb25zdCBlbGVtZW50U3RhdGVBdHRyaWJ1dGUgPSAnZGF0YS1zdGF0ZSc7XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgZWxlbWVudHMgYXR0cmlidXRlLCB0aGF0IGNvbnRhaW5zIG51bWJlciBvZiBzbGlkZVxuICogQHR5cGUgIHtTdHJpbmd9XG4gKi9cbmNvbnN0IGVsZW1lbnRTbGlkZU51bUF0dHJpYnV0ZSA9ICdkYXRhLW51bSc7XG5cbi8qKlxuICogRGVmYXVsdCBjaG9zZW4gc2xpZGVcbiAqIEB0eXBlICB7TnVtYmVyfVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IERFRkFVTFRfU0xJREUgPSAwO1xuXG4vKipcbiAqIE5hbWUgb2YgcmVjb3JkIHdpdGggbGFzdCBjaG9zZW4gc2xpZGUgaW4gTG9jYWwgU3RvcmFnZVxuICogQHR5cGUgIHtTdHJpbmd9XG4gKi9cbmNvbnN0IHNsaWRlSW5TdG9yYWdlID0gJ3NsaWRlJztcblxuLyoqXG4gKiBSZW5kZXIgcGFnZSBiYWNrZ3JvdW5kXG4gKi9cbmNvbnN0IHNldFBhZ2VCYWNrZ3JvdW5kID0gKGVsZW1lbnQpID0+IHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pbWcnKX0pYDtcbn07XG5cbiAgLyoqXG4gKiBTZXQgc2xpZGVyIGNvdW50ZXIgdmFsdWVcbiAqIEBwYXJhbSAge0VsZW1lbnR9ICBzbGlkZSAgRE9NLWVsZW1lbnQsIHRoYXQgY29udGFpbnMgc2xpZGVcbiAqIEBwYXJhbSAge0VsZW1lbnR9ICBjb3VudGVyQ29udGFpbmVyICBET00tZWxlbWVudCwgdGhhdCBjb250YWlucyBzbGlkZXIgY291bnRlciB2YWx1ZVxuKi9cbmNvbnN0IHNldFNsaWRlQ291bnRlciA9IChzbGlkZSwgY291bnRlckNvbnRhaW5lcikgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBjb3VudGVyQ29udGFpbmVyO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gYCR7c2xpZGUuZ2V0QXR0cmlidXRlKGVsZW1lbnRTbGlkZU51bUF0dHJpYnV0ZSl9IC8gJHtzbGlkZUxpc3QubGVuZ3RofWA7XG59O1xuXG4vKipcbiAqIFJlbmRlciBzbGlkZXIgY291bnRlclxuICogQHBhcmFtICB7RWxlbWVudH0gIGN1cnJlbnRTTGlkZSAgQ3VycmVudCBjaG9zZW4gc2xpZGVcbiAqL1xuY29uc3QgcmVuZGVyU2xpZGVDb3VudGVyID0gKGN1cnJlbnRTTGlkZSkgPT4ge1xuICAvLyBDcmVhdGUgRE9NLWVsZW1lbnQgZm9yIHNsaWRlIGNvdW50ZXIgY29udGFpbmVyXG4gIGNvbnN0IHNsaWRlQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgc2xpZGVDb3VudGVyLmNsYXNzTmFtZSA9IHNsaWRlci5pdGVtQ291bnRlcjtcbiAgc2xpZGVDb3VudGVyLmlubmVySFRNTCA9ICd8fCc7XG5cbiAgLy8gQ3JlYXRlIERPTS1lbGVtZW50IGZvciBzbGlkZSBjb3VudGVyXG4gIGNvbnN0IHNsaWRlQ291bnRlckNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHNsaWRlQ291bnRlckNvbnRlbnQuY2xhc3NOYW1lID0gc2xpZGVyLml0ZW1Db3VudGVyVmFsdWU7XG5cbiAgLy8gSW5zZXJ0IHNsaWRlIGNvdW50ZXIgYW5kIGl0cyBjb250YWluZXIgaW4gRE9NXG4gIGNvbnN0IHNsaWRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3NsaWRlci5jb250YWluZXJ9YCk7XG4gIHNsaWRlckNvbnRhaW5lci5pbnNlcnRCZWZvcmUoc2xpZGVDb3VudGVyLCBzbGlkZXJDb250YWluZXIuY2hpbGRyZW5bMF0pO1xuICBzbGlkZXJDb250YWluZXIuY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQoc2xpZGVDb3VudGVyQ29udGVudCk7XG5cbiAgc2V0U2xpZGVDb3VudGVyKGN1cnJlbnRTTGlkZSwgc2xpZGVDb3VudGVyQ29udGVudCk7XG59O1xuXG4vKipcbiAqIENoYW5nZSBjdXJyZW50IHNsaWRlXG4gKiBAcGFyYW0gIHtFbGVtZW50fSAgc2xpZGVQYXJlbnQgIERPTS1lbGVtZW50LCB0aGF0IGlzIGN1cnJlbnQgc2xpZGUgcGFyZW50XG4gKi9cbmNvbnN0IGNoYW5nZUN1cnJlbnRTbGlkZSA9IChzbGlkZVBhcmVudCkgPT4ge1xuICBjb25zdCBzbGlkZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7c2xpZGVyLml0ZW19YCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHNsaWRlc0xpc3RbaV0uY2hpbGRyZW5bMF0ucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnRTdGF0ZUF0dHJpYnV0ZSk7XG4gIH1cbiAgc2xpZGVQYXJlbnQuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKGVsZW1lbnRTdGF0ZUF0dHJpYnV0ZSwgc2xpZGVyLmN1cnJlbnRJdGVtKTtcbiAgbG9jYWxTdG9yYWdlW3NsaWRlSW5TdG9yYWdlXSA9IHNsaWRlUGFyZW50LmdldEF0dHJpYnV0ZShlbGVtZW50U2xpZGVOdW1BdHRyaWJ1dGUpIC0gMTtcbiAgc2V0UGFnZUJhY2tncm91bmQoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQpO1xuICBzZXRTbGlkZUNvdW50ZXIoc2xpZGVQYXJlbnQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3NsaWRlci5pdGVtQ291bnRlclZhbHVlfWApKTtcbn07XG5cbi8qKlxuICogU2F2ZSBsYXN0IGNob3NlbiBzbGlkZSBpbiBMb2NhbCBTdG9yYWdlXG4gKiBAcGFyYW0gIHtFbGVtZW50fSAgc2xpZGUgIERPTS1lbGVtZW50LCB0aGF0IGNvbnRhaW5zIHNsaWRlXG4qL1xuY29uc3Qgc2V0U2xpZGVJblN0b3JhZ2UgPSAoKSA9PiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzbGlkZUluU3RvcmFnZSwgREVGQVVMVF9TTElERSk7XG5cbi8qKlxuICAqIEdldCBsYXN0IGNob3NlbiBzbGlkZSBmcm9tIExvY2FsIFN0b3JhZ2VcbiAgKi9cbmNvbnN0IGdldFNsaWRlRnJvbVN0b3JhZ2UgPSAoKSA9PiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzbGlkZUluU3RvcmFnZSk7XG5cbi8qKlxuICogQ2xpY2tpbmcgb24gdGhlIHNsaWRlIGhhbmRsZXJcbiAqIEBwYXJhbSAge09iamVjdH0gIGV2ZW50XG4gKi9cbmNvbnN0IG9uU2xpZGVDbGljayA9IChldmVudCkgPT4ge1xuICBjb25zdCBjbGlja2VkU2xpZGVQYXJlbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgaWYgKGNsaWNrZWRTbGlkZVBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoc2xpZGVyLml0ZW0pKSB7XG4gICAgY2hhbmdlQ3VycmVudFNsaWRlKGNsaWNrZWRTbGlkZVBhcmVudCk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5pdGlhbGl6YXRpb25cbiAqL1xuKGZ1bmN0aW9uIF9pbml0RnVuYygpIHtcbiAgY29uc3Qgc2xpZGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtzbGlkZXIuaXRlbUxpc3R9YCk7XG4gIGxldCBkZWZhdWx0Q3VycmVudFNsaWRlO1xuXG4gIC8vIFNldCBkZWZhdWx0IGNob3NlbiBzbGlkZVxuICBpZiAoe30ucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChsb2NhbFN0b3JhZ2UsIHNsaWRlSW5TdG9yYWdlKSkge1xuICAgIGNvbnN0IGRlZmF1bHRDdXJyZW50U2xpZGVOdW0gPSBnZXRTbGlkZUZyb21TdG9yYWdlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICgoc2xpZGVMaXN0W2ldLmdldEF0dHJpYnV0ZShlbGVtZW50U2xpZGVOdW1BdHRyaWJ1dGUpIC0gMSkgPT09ICtkZWZhdWx0Q3VycmVudFNsaWRlTnVtKSB7XG4gICAgICAgIGRlZmF1bHRDdXJyZW50U2xpZGUgPSBzbGlkZUxpc3RbaV07XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRlZmF1bHRDdXJyZW50U2xpZGUgPSBzbGlkZUNvbnRhaW5lci5jaGlsZHJlbltERUZBVUxUX1NMSURFXTtcbiAgICBzZXRTbGlkZUluU3RvcmFnZShERUZBVUxUX1NMSURFKTtcbiAgfVxuXG4gIGRlZmF1bHRDdXJyZW50U2xpZGUuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKGVsZW1lbnRTdGF0ZUF0dHJpYnV0ZSwgc2xpZGVyLmN1cnJlbnRJdGVtKTtcblxuICAvLyBTZXQgc2xpZGVyIGNvdW50ZXIgYW5kIGRlZmF1bHQgYmFja2dyb3VuZFxuICBzZXRQYWdlQmFja2dyb3VuZChkZWZhdWx0Q3VycmVudFNsaWRlKTtcbiAgcmVuZGVyU2xpZGVDb3VudGVyKGRlZmF1bHRDdXJyZW50U2xpZGUpO1xuXG4gIC8vIEF0dGFjaGluZyBldmVudCBoYW5kbGVyc1xuICBzbGlkZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2xpZGVDbGljayk7XG59KCkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ibG9ja3Mvc2xpZGVyL3NsaWRlci5qcyJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBOzs7Ozs7Ozs7Ozs7QUM3REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7O0FDREE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbERBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBQ0E7QUFZQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNqTkE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0EiLCJzb3VyY2VSb290IjoiIn0=